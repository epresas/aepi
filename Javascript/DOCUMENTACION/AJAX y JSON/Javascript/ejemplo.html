<html>
    <head>
        <title>JSON</title>
        <meta charset="utf-8">


    </head>
    <body>
        <button onclick="procesar()">¡Procesar JSON!</button>
        <h4>JSON puro:</h4>
        <p id="resultado1"></p>

        <h4>JSON parseado:</h4>        
        <p id="resultado2"></p>

        <h4>Objeto literal resultante:</h4>        
        <p id="resultado3"></p>


    <script>
        
        function procesar() {

        let xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function() {

                let codigoPuro = xmlhttp.responseText;
                document.getElementById("resultado1").innerHTML = codigoPuro;


                let codigoParseado = JSON.parse(codigoPuro);
                document.getElementById("resultado2").innerHTML = codigoParseado;


                let detalles = "Nombre de la pandilla: <b>" + codigoParseado.nombrePandilla + "</b><br>";
                detalles += "Son " + codigoParseado.miembros.length + " superhéroes de " + codigoParseado.cuidad + "<br>";
                detalles += "La más fuerte es " + codigoParseado.miembros[1].nombre + ", con " + codigoParseado.miembros[1].superpoderes.length +  " superpoderes:<br>";
                for (let i in codigoParseado.miembros[1].superpoderes) {
                    detalles += " - " + codigoParseado.miembros[1].superpoderes[i] + "<br>";
                }
                
                document.getElementById("resultado3").innerHTML = detalles;
            }

            xmlhttp.open("GET", "archivos/superheroes.json", true);
            xmlhttp.send();
        }

    </script>

    </body>
</html> 